---
title: 沈阳网络赛2017
date: 2017-09-14 16:11:20
tags: [题解]
categories: ACM
---

hdu 6199 dp
```c++
ll dp[2][350][220];
ll sum[40020];
ll v[40020];

int main()
{
    int t,n;
    sc(t);
    while(t--){
        sc(n);
        sum[0] = 0;
        for(int i=1; i<=n; i++){
            scanf("%lld",v+i);
            sum[i] = sum[i-1]+v[i];
        }
        memset(dp,0,sizeof(dp));
        for(int i=n; i>=1; i--){
            for(int j=1; j*j<=2*i; j++){
                if(i+j==n+1){
                    dp[0][i&mod][j] = sum[n]-sum[i-1];
                    dp[1][i&mod][j] = sum[i-1] - sum[n];
                    break;
                }
                if(i+j>n+1) continue;
                dp[0][i&mod][j] = max(dp[1][(i+j)&mod][j], dp[1][(i+j+1)&mod][j+1]+v[i+j]) + sum[i+j-1] - sum[i-1];
                dp[1][i&mod][j] = min(dp[0][(i+j)&mod][j], dp[0][(i+j+1)&mod][j+1]-v[i+j]) - sum[i+j-1] + sum[i-1];
            }
        }
        cout<<dp[0][1][1]<<endl;
    }
}
```


hdu 6201 树上DP
```c++
struct node{
    int to,cost,next;
}e[MAXN];
int head[MAXN];
int val[MAXN];
int dp[2][MAXN];
int cnt = 0;

void add_edge(int f,int t,int c)
{
    e[cnt].to = t;
    e[cnt].cost = c;
    e[cnt].next = head[f];
    head[f] = cnt;
    cnt++;
}

void dfs(int u,int pre)
{
    dp[0][u] = -val[u];
    dp[1][u] = val[u];
    for(int i=head[u]; i!=-1; i=e[i].next){
        int v = e[i].to;
        int cost = e[i].cost;
        if(pre==v) continue;
        dfs(v,u);
        dp[0][u] = max(dp[0][u],dp[0][v]-cost);
        dp[1][u] = max(dp[1][u],dp[1][v]-cost);
    }
}

int main()
{
    int t,n;
    sc(t);
    while(t--){
        sc(n);
        for(int i=1; i<=n; i++) sc(val[i]);
        memset(head,-1,sizeof(head));
        memset(dp,0,sizeof(dp));
        cnt = 0;
        for(int i=1; i<n; i++){
            int f,t,c;
            sc(f);  sc(t); sc(c);
            add_edge(f,t,c);
            add_edge(t,f,c);
        }
        dfs(1,-1);
        int ans = 0;
        for(int i=1; i<=n; i++){
            ans = max(ans,dp[0][i]+dp[1][i]);
        }
        printf("%d\n",ans);
    }
}
```